;/*FB_PKG_DELIM*/

__d("WeakRefApiUtils",["vulture"],(function(a,b,c,d,e,f,g){"use strict";var h,a=(h=window)!=null?h:self,i=a.WeakMap,j=v(),k=a.WeakSet,l=w(),m=a.WeakRef,n=x(),o=j&&l&&n,p=function(){function a(a){}var b=a.prototype;b.deref=function(){c("vulture")("vcKirIBDOYTDB18gTI52X7v9NDM=");return void 0};return a}(),q=function(){function a(a){}var b=a.prototype;b.add=function(a){c("vulture")("Gtzf_S1A8W74Y0b8Hh5H-gvI9ao=");return this};b["delete"]=function(a){c("vulture")("CzdqEMyQ211dnonPHsDYJk0hwDc=");return!1};b.has=function(a){c("vulture")("WCq-yrXA9jHcXwgkHkZXlw2s490=");return!1};return a}(),r=function(){function a(a){}var b=a.prototype;b["delete"]=function(a){c("vulture")("ZFiepUVzTCId2HmUHBd_XYPPgto=");return!1};b.get=function(a){c("vulture")("_q2VsxWWGT_c25SdSPIx3RMFt2g=");return void 0};b.has=function(a){c("vulture")("7ZWG8G0AW0Q7QijqyaYVMcO6sYg=");return!1};b.set=function(a,b){c("vulture")("jwtlqx50VRe0K_WX2K1haKLbRg8=");return this};return a}();function b(){c("vulture")("I392yphdavooHX0YM_MQArIan48=");return j?i:null}function d(){return j&&i?i:r}function e(){c("vulture")("QnyGu13E8fUZrpPP_XpPokQ55fE=");return l?k:null}function f(){return l&&k?k:q}function s(){c("vulture")("jKqR4UraLAYrf2C18PPe4JG14r8=");return n?m:null}function t(){return n&&m?m:p}function u(a){return typeof a.replace==="function"?a.replace(/\n/g," ").replace(/\s+/g," "):null}function v(){return i!=null&&typeof i.toString==="function"&&u(i.toString())==="function WeakMap() { [native code] }"}function w(){return k!=null&&typeof k.toString==="function"&&u(k.toString())==="function WeakSet() { [native code] }"}function x(){return m!=null&&typeof m.toString==="function"&&u(m.toString())==="function WeakRef() { [native code] }"}function y(){return o}g.WeakRefNoOp=p;g.WeakSetNoOp=q;g.WeakMapNoOp=r;g.getNativeWeakMap=b;g.getNativeWeakMapOrFallback=d;g.getNativeWeakSet=e;g.getNativeWeakSetOrFallback=f;g.getNativeWeakRef=s;g.getNativeWeakRefOrFallback=t;g.isWeakMapNative=v;g.isWeakSetNative=w;g.isWeakRefNative=x;g.isWeakAPINative=y}),98);
__d("DOMElementCounter",["FBLogger","WeakRefApiUtils","justknobx"],(function(a,b,c,d,e,f,g){var h=c("justknobx")._("1816"),i=c("justknobx")._("1858"),j=d("WeakRefApiUtils").isWeakAPINative(),k=window.MutationObserver!==void 0;a=function(){function a(){this.$1=0,this.$2=0,this.$4=[],j&&(this.$6=new WeakSet(),this.startMonitoring())}a.getSingleton=function(){if(!j)return null;a.instance==null&&(a.instance=new a());return a.instance};var b=a.prototype;b.$7=function(a){var b;if(a.nodeType!==1)return;if(this.$6==null)return;if(this.$6.has(a))return;this.$4.push(new WeakRef(a));(b=this.$6)==null||b.add(a)};b.startMonitoring=function(){var a=this;if(!j||!k)return;if(this.$3!=null)return;this.$3=new MutationObserver(function(b){b.forEach(function(b){b.removedNodes.forEach(function(b){if(b==null)return;h?a.$8(b):a.$7(b)})})});this.$3.observe(document.body,{childList:!0,subtree:!0});this.$5=window.setInterval(function(){a.$9()},i)};b.stopMonitoring=function(){this.$3!=null&&(this.$3.disconnect(),this.$3=null),this.$5!=null&&(window.clearInterval(this.$5),this.$5=null)};b.$9=function(){var a=[];for(var b of this.$4)b.deref()!=null&&a.push(b);this.$4=a};b.$10=function(){var a;return this.$1=(a=(a=document)==null||(a=a.getElementsByTagName("*"))==null?void 0:a.length)!=null?a:0};b.$11=function(){var a=0;for(var b of this.$4){var c=b.deref();c&&c.isConnected===!1&&++a}return this.$2=a};b.$8=function(a){a=[a];var b=new Set();while(a.length>0){var c=a.pop();if(c==null||b.has(c))continue;b.add(c);var d=c.childNodes;for(var e=0;e<d.length;++e)a.push(d[e]);this.$7(c)}};b.getStats=function(){try{this.$1=this.$10(),this.$2=this.$11()}catch(a){c("FBLogger")("memory_logger").catching(a).warn("Failed to get DOM elements")}return{elements:this.$1,detachedElements:this.$2}};return a}();g.DOMElementCounter=a}),98);
__d("LogWebMemoryUsageFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1765264");b=d("FalcoLoggerInternal").create("log_web_memory_usage",a);e=b;g["default"]=e}),98);
__d("MemoryLoggerConfig",["FBLogger","MemoryLoggerConfigWebSitevarConfig","getErrorSafe","gkx"],(function(a,b,c,d,e,f,g){"use strict";b="__felab_context"in window;d=c("gkx")("20861");var h=c("gkx")("11860")&&(d||b);e=h?c("MemoryLoggerConfigWebSitevarConfig").jest_e2e_measurement_interval_seconds*1e3:c("MemoryLoggerConfigWebSitevarConfig").measurement_interval_minutes*60*1e3;f=10*1e3;d=c("MemoryLoggerConfigWebSitevarConfig").quick_measurement_interval_seconds*1e3;b=1e3;var i=200,j=c("gkx")("21032"),k={MAX_QUICK_MEMORY_SAMPLE_SIZE:i,MEAN_MEASUREMENT_INTERVAL_MS:e,MINIMUM_MEAN_MEASUREMENT_INTERVAL_MS:f,MINIMUM_PEAK_MEASUREMENT_INTERVAL_MS:b,PEAK_MEASUREMENT_INTERVAL_MS:d,SHOULD_SCHEDULE_QUICK_SAMPLE_LOGGING:j};function l(a){var b=c("MemoryLoggerConfigWebSitevarConfig").app_specific_config;if(b==null||b.length===0)return k;var d=a.initialUrl,e=b.filter(function(a){return a.url_pattern!=null});b=b.filter(function(a){return a.url_pattern==null});e=e.find(function(b){var e;if(""+b.app_id!==""+((e=a.appID)!=null?e:-1))return!1;if(b.url_pattern==null||d==null)return!1;try{e=b.url_pattern.trim();e.startsWith("/")&&e.endsWith("/")&&(e=e.slice(1,e.length-1));e=new RegExp(e);return e.test(d)}catch(a){c("FBLogger")("memory_logger").warn("failed to test url pattern %s",b.url_pattern);return!1}});e==null&&(e=b.find(function(b){return""+b.app_id===""+((b=a.appID)!=null?b:-1)}));b=babelHelpers["extends"]({},k);if(e==null)return b;e.measurement_interval_minutes!=null&&(b.MEAN_MEASUREMENT_INTERVAL_MS=e.measurement_interval_minutes*60*1e3);e.measurement_interval_seconds!=null&&(b.MEAN_MEASUREMENT_INTERVAL_MS=e.measurement_interval_seconds*1e3);e.quick_measurement_interval_seconds!=null&&(b.PEAK_MEASUREMENT_INTERVAL_MS=e.quick_measurement_interval_seconds*1e3);e.jest_e2e_measurement_interval_seconds!=null&&h&&(b.MEAN_MEASUREMENT_INTERVAL_MS=e.jest_e2e_measurement_interval_seconds*1e3);return b}function a(a){try{return l(a)}catch(a){c("FBLogger")("memory_logger").catching(c("getErrorSafe")(a)).warn("failed obtain app-specific config")}return k}i=babelHelpers["extends"]({},k,{getAppSpecificConfig:a});g["default"]=i}),98);
__d("prepareURIForWebInfraLogging",["URI"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=new(h||(h=c("URI")))(a);var b=a.getQueryData();b=b.ref;return a.setFragment("").setQueryData({ref:b})}g["default"]=a}),98);
__d("MemoryLoggerUtils",["CurrentUser","MemoryUtils","ODS","Promise","VisibilityAPI","gkx","ifRequired","prepareURIForWebInfraLogging","requireWeak"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;c("requireWeak")("AdsAccountStore",function(a){j=a});c("requireWeak")("PolarisConfig",function(a){k=a});c("requireWeak")("BarcelonaCurrentUser",function(a){l=a});var m=c("gkx")("21030")?function(){var a=-1;a<0&&c("ifRequired")("AdsAccountInsightsStore",function(b){b=b.getLastThirtyDaysSpend().getValue();a=p(b)});m=function(){return a};return a}:function(){return-1},n=c("gkx")("21030")?function(){var a;return(a=(a=j)==null?void 0:a.getSelectedAccountID())!=null?a:"0"}:function(){return"0"},o=c("gkx")("4617")?function(){var a;return(a=(a=(a=k)==null?void 0:a.getViewerIdOrZero())!=null?a:(a=l)==null?void 0:a.getViewerID())!=null?a:"0"}:function(){return"0"};function p(a){return typeof a!=="number"?-1:Math.floor(a)}function a(){return c("CurrentUser").isLoggedIn()}function e(){return c("CurrentUser").getAppID()}var q=null;function r(){q||c("ifRequired")("InteractionTracingMetrics",function(a){q=a.getInteractionStat()})}function f(){q||r();return q?q.interactionCount:0}function s(a){if(a){a=d("MemoryUtils").isMeasureMemoryOriginTrialSupported()?"experimental":"hit";(i||(i=d("ODS"))).bumpEntityKey(2966,"browser_memory_logger",a)}else(i||(i=d("ODS"))).bumpEntityKey(2966,"browser_memory_logger","miss")}function t(){return!d("MemoryUtils").isMeasureMemoryOriginTrialSupported()||!c("gkx")("4222")?(h||(h=b("Promise"))).resolve(-1):window.performance.measureUserAgentSpecificMemory()["catch"](function(){return-1})}function u(){var a=-1,b=-1,c=URL._fbRegisteredObjectURL;if(typeof c==="function"){c=c();a=c.length;b=0;for(c of c)c.type==="Blob"&&(b=(b||0)+c.size)}return{unrevokedMemoryBlob:b,unrevokedUrlCount:a}}function v(){return w(document.URL)}function w(a){return a==null?a:c("prepareURIForWebInfraLogging")(a).toString()}function x(){return!1}function y(){return!1}function z(){return"web"}function A(){if(typeof document!=="object")return!1;try{return d("VisibilityAPI").isVisibilityHidden()}catch(a){}return!1}s={bumpMemoryLoggerODS:s,convertToInt:p,getAccurateJSHeapSize:t,getAdAccountID:n,getAdSpend:m,getCurrentURL:v,getIGUserId:o,getInitialAppID:e,getInteractionTraceingCount:f,getPlatform:z,getUnrevokedURLInfo:u,isDevEnv:x,isInBackground:A,isTesting:y,isUserLoggedIn:a,preProcessURL:w};g["default"]=s}),98);
__d("MemoryLoggerBase",["CurrentCanonicalRoute","DOMElementCounter","Env","FBLogger","MemoryLoggerConfig","MemoryLoggerUtils","MemoryUtils","Promise","gkx","performanceNow","promiseDone","react","requireDeferred","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).version,m=c("requireDeferred")("LogWebMemoryUsageFalcoEvent").__setRef("MemoryLoggerBase"),n=c("MemoryLoggerUtils").getInitialAppID(),o=c("MemoryLoggerConfig").getAppSpecificConfig({appID:n,initialUrl:c("MemoryLoggerUtils").getCurrentURL()}),p,q=-1,r=-1,s=-1,t=-1,u=null,v=-1,w=-1,x=null,y=[],z=[];function A(){return(j||(j=b("Promise"))).resolve().then(function(){var a=d("MemoryUtils").getCurrentMemory();a=(a=a.usedJSHeapSize)!=null?a:-1;w=Math.max(a,w);z.push({jsHeapSize:a,timestamp:Date.now()});z.length>o.MAX_QUICK_MEMORY_SAMPLE_SIZE&&z.shift()})}function B(a,b){return Math.max(b,-Math.log(Math.random())*a)}function C(a,b,d){var e=B(b,d);c("setTimeoutAcrossTransitions")(function(){c("promiseDone")(a(),function(){C(a,b,d)})},e)}function D(){var a,e=c("MemoryLoggerUtils").getCurrentURL(),f=d("MemoryUtils").getCurrentMemory(),g=c("MemoryLoggerUtils").isInBackground(),k=f.usedJSHeapSize,o=(a=f.totalJSHeapSize)!=null?a:-1,z=(a=f.jsHeapSizeLimit)!=null?a:-1,A=null;return(j||(j=b("Promise"))).resolve().then(function(){c("MemoryLoggerUtils").getAccurateJSHeapSize().then(function(a){A=a})["catch"](function(){A=-1})}).then(function(){var a=c("MemoryLoggerUtils").getUnrevokedURLInfo(),b=a.unrevokedMemoryBlob,f=a.unrevokedUrlCount;a=(h||(h=c("performanceNow")))();var j=Math.round(a/(1e3*60)),B=c("MemoryLoggerUtils").getInteractionTraceingCount(),C=c("MemoryLoggerUtils").getAdAccountID(),D=c("MemoryLoggerUtils").getIGUserId(),E=(a=x)==null?void 0:a.getStats(),F=d("CurrentCanonicalRoute").getForGlobalLoggingOnly(),G=(i||(i=c("Env"))).brsid;m.onReady(function(a){a.log(function(){var a;return{accurate_js_heap_size:A!=null?String(A):null,ad_account_id:C,ad_spend_30:String(c("MemoryLoggerUtils").getAdSpend()),app_id:n,current_uri:e,ig_user_id:D,interaction_count:String(B),is_dev_env:c("MemoryLoggerUtils").isDevEnv(),is_logged_out:!c("MemoryLoggerUtils").isUserLoggedIn(),is_testing:c("MemoryLoggerUtils").isTesting(),is_in_background:g,minute:String(j),navigation_count:String(q),news_feed_count:String(r),news_feed_story_position:String(s),news_feed_story_position_offset:String(t),peak_used_js_heap_size:String(w),platform:c("MemoryLoggerUtils").getPlatform(),previous_uri:(a=u)==null?void 0:a.toString(),previous_used_js_heap_size:String(v),react_version:l,script_path:p,tags:y,canonical_route:F,brsid:String(G!=null?G:0),unrevoked_memory_blob:b!=null?String(b):null,unrevoked_url_count:f!=null?String(f):null,used_js_heap_size:String(k),total_js_heap_size:String(o),js_heap_size_limit:String(z),dom_element_count:String((a=E==null?void 0:E.elements)!=null?a:0),detached_dom_element_count:String((a=E==null?void 0:E.detachedElements)!=null?a:0)}})})})["catch"](function(a){return c("FBLogger")("memory_logger").catching(a).warn("failed to log memory usage")})}var E=c("MemoryLoggerUtils").convertToInt((a=d("MemoryUtils").getCurrentMemory().totalJSHeapSize)!=null?a:-1);e={getCurrentUsedJSHeapSize:function(){var a=d("MemoryUtils").getCurrentMemory();return c("MemoryLoggerUtils").convertToInt((a=a.usedJSHeapSize)!=null?a:-1)},getCurrentTotalJSHeapSize:function(){var a=d("MemoryUtils").getCurrentMemory();return c("MemoryLoggerUtils").convertToInt((a=a.totalJSHeapSize)!=null?a:-1)},getJSHeapSizeLimit:function(){return E},getPeakUsedJSHeapSize:function(){return w},getQuickUsedJSHeapSizeSamples:function(){return[].concat(z)},init:function(a){p=a.scriptPath;if(o.MEAN_MEASUREMENT_INTERVAL_MS<=0)return;d("MemoryUtils").isMemoryAPISupported()?(c("MemoryLoggerUtils").bumpMemoryLoggerODS(!0),C(D,o.MEAN_MEASUREMENT_INTERVAL_MS,o.MINIMUM_MEAN_MEASUREMENT_INTERVAL_MS),o.SHOULD_SCHEDULE_QUICK_SAMPLE_LOGGING&&C(A,o.PEAK_MEASUREMENT_INTERVAL_MS,o.MINIMUM_PEAK_MEASUREMENT_INTERVAL_MS),c("gkx")("9317")&&(x=d("DOMElementCounter").DOMElementCounter.getSingleton())):c("MemoryLoggerUtils").bumpMemoryLoggerODS(!1)},setAppID:function(a){n=a},setNavigationCount:function(a){q=a},setNewsFeedCount:function(a){r=a},setNewsFeedStoryPosition:function(a){s=c("MemoryLoggerUtils").convertToInt(a)},setNewsFeedStoryPositionOffset:function(a){t=c("MemoryLoggerUtils").convertToInt(a)},setPreviousUri:function(a){u=c("MemoryLoggerUtils").preProcessURL(a)},setPreviousUsedJSHeapSize:function(a){v=c("MemoryLoggerUtils").convertToInt(a)},setScriptPath:function(a){p=a},setTags:function(a){y=a}};f=e;g["default"]=f}),98);
__d("MemoryLogger",["MemoryLoggerBase","NavigationMetrics","ScriptPath"],(function(a,b,c,d,e,f,g){var h=!1,i=0;a={init:function(a){var b=this;if(h)return;h=!0;c("MemoryLoggerBase").init({scriptPath:d("ScriptPath").getScriptPath()});d("ScriptPath").subscribe(function(){c("MemoryLoggerBase").setScriptPath(d("ScriptPath").getScriptPath())});c("NavigationMetrics").addListener(c("NavigationMetrics").Events.NAVIGATION_DONE,function(a,c){b.incrementNavigationCount(i)})},setPreviousUri:function(a){c("MemoryLoggerBase").setPreviousUri(a)},incrementNavigationCount:function(){c("MemoryLoggerBase").setNavigationCount(++i)},getQuickUsedJSHeapSizeSamples:function(){return c("MemoryLoggerBase").getQuickUsedJSHeapSizeSamples()},setTags:function(a){c("MemoryLoggerBase").setTags(a)}};b=a;g["default"]=b}),98);